{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?afd2","webpack:///./src/engine/Renderer.js","webpack:///./src/engine/ParticleSystem.js","webpack:///./src/engine/Stage.js","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?c650"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","ref","staticClass","_v","directives","rawName","expression","class","input1Func","domProps","on","$event","target","composing","input1","input2Func","input2","input3Func","input3","staticRenderFns","Renderer","antialias","alpha","setClearColor","setSize","windowWidth","windowHeight","setPixelRatio","devicePixelRatio","shadowMap","enabled","gl","getContext","getExtension","alert","Error","getParameter","MAX_VERTEX_TEXTURE_IMAGE_UNITS","WebGLRenderer","_q","Quaternion","vertexShader","textureSize","fragmentShader","ParticleSystem","geometry","InstancedBufferGeometry","copy","ConeBufferGeometry","offsets","orientations","scales","indexes","colors","gridXYZs","lifetimes","numberOfRows","numberOfColumns","numberOfBuckets","stepSize","halfStep","offsetX","offsetY","offsetZ","z","y","x","set","normalize","w","setAttribute","InstancedBufferAttribute","Float32Array","customUniforms","UniformsUtils","merge","ShaderLib","phong","uniforms","time","mapper","textureLoader","TextureLoader","material","ShaderMaterial","side","FrontSide","lights","blending","CustomBlending","transparent","alphaTest","receiveShadow","castShadow","op1","op2","op3","attributes","orientation","array","i4","Vector4","Vector3","Matrix4","res1","res2","res3","pitch","Math","sin","yaw","atan2","tmpQ","tmpQ1","tmpQ2","setFromAxisAngle","multiplyQuaternions","needsUpdate","elapsedTime","Mesh","Stage","container","renderCallBack","requestAnimationFrame","loop","render","controls","update","stageWidth","innerWidth","stageHeight","innerHeight","renderer","camera","aspect","updateProjectionMatrix","clock","Clock","appendChild","domElement","PerspectiveCamera","position","scene","Scene","createLights","OrbitControls","enableDamping","dampingFactor","screenSpacePanning","minDistance","maxDistance","maxPolarAngle","PI","particles","add","addListeners","handleWindowResize","instance","destroy","updateFunctions","light","AmbientLight","getElapsedTime","clear","cancelAnimationFrame","simulation","removeListeners","addEventListener","removeEventListener","mounted","beforeDestroy","watch","text","noop","sendToTracer","methods","component","Vue","config","productionTip","h","App","$mount"],"mappings":"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","file":"js/app.3435988f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"//mikatalk.github.io/vector-flows/3d/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{ref:\"canvas-container\",staticClass:\"canvas-container\"}),_c('header',[_c('span',{staticClass:\"prefix\"},[_vm._v(\"f(x,y,z) = \")]),_c('span',{staticClass:\"inputs-wrapper\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.input1),expression:\"input1\"}],class:{'invalid':_vm.input1Func === null},attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.input1)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.input1=$event.target.value}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.input2),expression:\"input2\"}],class:{'invalid':_vm.input2Func === null},attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.input2)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.input2=$event.target.value}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.input3),expression:\"input3\"}],class:{'invalid':_vm.input3Func === null},attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.input3)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.input3=$event.target.value}}})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { WebGLRenderer } from 'three'\n\nexport default class Renderer extends WebGLRenderer {\n  constructor () {\n    super ({\n      antialias: true,\n      alpha: true,\n    })\n\n    this.setClearColor(0, 0)\n    this.setSize(this.windowWidth, this.windowHeight)\n    this.setPixelRatio(window.devicePixelRatio)\n    this.shadowMap.enabled = true\n\n    const gl = this.getContext()\n    if (!gl.getExtension('OES_texture_float')) {\n      alert('client support error - float textures not supported')\n      throw new Error('float textures not supported')\n    }\n    // we need to access textures from within the vertex shader\n    //https://github.com/KhronosGroup/WebGL/blob/90ceaac0c4546b1aad634a6a5c4d2dfae9f4d124/conformance-suites/1.0.0/extra/webgl-info.html\n    if (gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS) === 0) {\n      alert('client support error - vertex shader cannot read textures')\n      throw new Error('vertex shader cannot read textures')\n    } \n  }\n}\n","import { Mesh,\n  InstancedBufferGeometry,\n  InstancedBufferAttribute,\n  TextureLoader,\n  RawShaderMaterial,\n  Quaternion,\n  Uniform,\n  Color,\n  FrontSide,\n  Vector3,\n  ConeBufferGeometry,\n  NormalBlending,\n  AdditiveBlending,\n  Euler,\n  BoxBufferGeometry,\n  Matrix4,\n  Vector4,\n  DoubleSide,\n  PlaneBufferGeometry,\n  TetrahedronBufferGeometry,\n  ShaderLib,\n  CustomBlending,\n  UniformsUtils,\n  ShaderMaterial\n} from 'three'\n// import { _ } from 'core-js'\n\n// const imageURI = \"data:image/png;base64,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\"\nconst _q = new Quaternion()\nconst vertexShader = textureSize => `\n#define PHONG\nvarying vec3 vViewPosition;\nvarying vec2 vUv;\nattribute vec4 instanceQuaternion;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n// custom code:\nuniform float time;\n// uniform vec4 cameraProps;\n// uniform sampler2D levelImageMap;\n// attribute float offset;\nattribute vec4 orientation;\nattribute vec3 offset;\nattribute vec3 gridXYZ;\nattribute float scale;\n// uniform vec3 floorOffset;\nattribute vec3 color;\nvarying vec4 vColor;\nvec3 applyQuaternionToVector( vec4 q, vec3 v ){\n\treturn v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t\n  vUv = uv;\n\t\n  vec3 transformed = position;\n  \n  // vColor = vec4(color, (1.0 + sin(transformed.z * 1000.0 + time)) / 2.0);\n  vColor = vec4(color, mod(time - gridXYZ.z / ${textureSize}.0, 1.0));\n\n  transformed = applyQuaternionToVector(orientation, transformed);\n  transformed += offset;\n  \n  // vColor = vec4(color, 1.0);       //max(0.75, sin(position.y * 0.005 - time * 0.5)));\n\n  \n  // transformed *= vec3(scale, scale, 1.0);\n\n  \n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n`\n\n\nconst fragmentShader = `\n#define PHONG\nvarying vec4 vColor;\nvarying vec2 vUv;\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\nuniform float lifetime;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n  vec4 diffuseColor = vec4( diffuse, opacity );\n  \n  // diffuseColor = vec4(vColor.rgb,0.8);\n  // diffuseColor = vColor;\n  diffuseColor = vec4(vUv.xy,0.5, 0.6);\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t// modulation\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n`\n\n\n\nexport default class ParticleSystem extends Mesh {\n\n  constructor (textureSize) {\n\n    // const radius = 50\n    // const numberOfParticles = textureSize * textureSize\n    // create an instanced buffer from a plane buffer geometry\n    \n    // const plane1 = new PlaneBufferGeometry(1, 1, 1, 1)\n    // const matrix = new Matrix4().makeRotationY(Math.PI/2)\n    // const plane2 = new PlaneBufferGeometry(1, 1, 1, 1)\n    // plane2.merge(plane1, matrix)\n\n    // // const arrow = new ArrowHelper(new Vector3(0,0,0), new Vector3(1,0,0), 1, 0xffff00)\n    const geometry = new InstancedBufferGeometry()\n    // geometry.copy(new TetrahedronBufferGeometry(1, 0))\n    // geometry.copy(plane2)\n    // geometry.copy(new PlaneBufferGeometry(1, 1, 1, 1))\n    // geometry.copy(arrow.geometry)\n    geometry.copy(new ConeBufferGeometry(1, 8, 3))\n    // geometry.copy(new BoxBufferGeometry(0.5, 0.5, 0.5))\n    \n//     radius — Radius of the cone at the base. Default is 1.\n// height — Height of the cone. Default is 1.\n// radialSegments — Number of segmented faces around the circumference of the cone. Default is 8\n// heightSegments — Number of rows of faces along the height of the cone. Default is 1.\n// openEnded — A Boolean indicating whether the base of the cone is open or capped. Default is false, meaning capped.\n// thetaStart — Start angle for first segment, default = 0 (three o'clock position).\n// thetaLength — The central angle, often called theta, of the circular sector. The default is 2*Pi, which makes for a complete cone.\n\n    // Add/generate attributes buffers for the geometry\n    const offsets = []\n    const orientations = []\n    // const mats = []\n    const scales = []\n    const indexes = []\n    const colors = []\n    const gridXYZs = []\n    const lifetimes = []\n    // const spacing = 2\n    // const halfOffset = textureSize * spacing / 2\n\n    const numberOfRows = textureSize\n    const numberOfColumns = textureSize\n    const numberOfBuckets = textureSize\n    const stepSize = 8\n    const halfStep = stepSize / 2\n    let i = 0\n    const offsetX = stepSize * numberOfColumns / 2\n    const offsetY = stepSize * numberOfRows / 2\n    const offsetZ = stepSize * numberOfBuckets / 2\n    for (let z = 0; z < numberOfBuckets; z += 1) {\n      for (let y = 0; y < numberOfRows; y += 1) {\n        for (let x = 0; x < numberOfColumns; x += 1) {\n\n        // for (let i = 0; i < numberOfParticles; i += 1) {\n          offsets.push(\n            -offsetX + x * stepSize + halfStep,\n            -offsetY + y * stepSize + halfStep,\n            -offsetZ + z * stepSize + halfStep\n          )\n          _q.set(0, 0, 0, 0).normalize();\n\n          orientations.push(\n            _q.x, _q.y, _q.z, _q.w\n          )\n\n          // mats.push(\n          //   0,0,0,1\n          // )\n\n          gridXYZs.push(x,y,z)\n\n          colors.push(\n            0.1,0.1,0.1\n            // 0.5 + x / numberOfBuckets / 2,\n            // 0.5 - y / numberOfBuckets / 2,\n            // 1 - z / numberOfBuckets / 2\n            // y / numberOfRows\n            // Math.random(),\n            // Math.random(),\n            // Math.random()\n          )\n          scales.push(stepSize / 8)\n          // indexes.push(i + 1)\n          // i += 1\n          // lifetimes.push(0, 0.5 + Math.random() / 2)\n          // lifetimes.push(0, 1)\n        }\n      }\n    }\n    geometry.setAttribute('offset', new InstancedBufferAttribute(new Float32Array(offsets), 3))\n    geometry.setAttribute('orientation', new InstancedBufferAttribute(new Float32Array(orientations), 4))\n    geometry.setAttribute('gridXYZ', new InstancedBufferAttribute(new Float32Array(gridXYZs), 3))\n    // geometry.setAttribute('mat', new InstancedBufferAttribute(new Float32Array(mats), 4))\n    geometry.setAttribute('scale', new InstancedBufferAttribute(new Float32Array(scales), 1))\n    geometry.setAttribute('color', new InstancedBufferAttribute(new Float32Array(colors), 3))\n    geometry.setAttribute('particleIndex', new InstancedBufferAttribute(new Float32Array(indexes), 1))\n    geometry.setAttribute('lifetime', new InstancedBufferAttribute(new Float32Array(lifetimes), 2))\n      \n    \n    const customUniforms = UniformsUtils.merge([\n      ShaderLib.phong.uniforms,\n      { \n        time: { value: 1.0 },\n        mapper: textureLoader,\n      }\n    ])\n    \n    \n    const textureLoader = new TextureLoader()\n    const material = new ShaderMaterial({\n      uniforms: customUniforms, \n      vertexShader: vertexShader(textureSize),\n      fragmentShader: fragmentShader,\n      side: FrontSide,\n      // fog: true,\n      lights: true,\n      // flatShading: true,\n      name: 'phong-cones',\n      // blending: NormalBlending,\n      blending: CustomBlending,\n      transparent: true,\n      alphaTest: 0.01,\n      // wireframe: true,\n      // opacity: 0.7,\n    })\n    \n    super(geometry, material)\n    \n    this.receiveShadow = true\n    this.castShadow = true\n\n    this.textureSize = textureSize\n\n\n  }\n\n  updateFunctions (op1, op2, op3) {\n    const orientations = this.geometry.attributes.orientation.array\n    // const mats = this.geometry.attributes.mat.array\n    const numberOfRows = this.textureSize\n    const numberOfColumns = this.textureSize\n    const numberOfBuckets = this.textureSize\n    let i = 0\n    let i4 = 0\n\n    const vec4 = new Vector4()\n    const vec3 = new Vector3()\n    const mat = new Matrix4()\n    const quat = new Quaternion()\n    for (let z = 0; z < numberOfBuckets; z += 1) {\n      for (let y = 0; y < numberOfRows; y += 1) {\n        for (let x = 0; x < numberOfColumns; x += 1) {\n          const res1 = op1(x - numberOfColumns/2, y - numberOfRows/2, z - numberOfBuckets/2)\n          const res2 = op2(x - numberOfColumns/2, y - numberOfRows/2, z - numberOfBuckets/2)\n          const res3 = op3(x - numberOfColumns/2, y - numberOfRows/2, z - numberOfBuckets/2)\n          \n          \n          \n          \n          const pitch = Math.sin(-res2);\n          const yaw = Math.atan2(res1, res3)\n          const tmpQ = new Quaternion()\n          const tmpQ1 = new Quaternion()\n          const tmpQ2 = new Quaternion()\n          const matrix = new Matrix4()\n          // matrix.makeRotationY(yaw)\n          // matrix.makeRotationX(pitch)\n          // tmpQ.setFromRotationMatrix(matrix).normalize()\n          tmpQ1.setFromAxisAngle(new Vector3(0,1,0), yaw).normalize()\n          tmpQ2.setFromAxisAngle(new Vector3(1,0,0), pitch).normalize()\n          tmpQ.multiplyQuaternions(tmpQ1, tmpQ2).normalize()\n          orientations[i4 + 0] = tmpQ.x\n          orientations[i4 + 1] = tmpQ.y\n          orientations[i4 + 2] = tmpQ.z\n          orientations[i4 + 3] = tmpQ.w\n\n          i += 1\n          i4 += 4\n        }\n      }\n    }\n    this.geometry.attributes.orientation.needsUpdate = true\n  }\n\n  loop (elapsedTime) {\n    this.material.uniforms.time.value = elapsedTime * 1\n  }\n}\n","import { Clock, Scene, PerspectiveCamera, Mesh, BoxGeometry, MeshBasicMaterial, AxesHelper, AmbientLight, DirectionalLight, PointLight } from 'three'\nimport Renderer from './Renderer'\nimport ParticleSystem from './ParticleSystem'\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\n\nexport default class Stage {\n\n  static instance = null\n  \n  static initialize (container, op1, op2, op3) {\n    if (!Stage.instance) {\n      Stage.instance = new Stage(container, op1, op2, op3)\n    }\n  }\n  \n  static destroy () {\n    Stage.instance && Stage.instance.destroy()\n  }\n  \n  static updateFunctions(op1, op2, op3) {\n    Stage.instance && Stage.instance.updateFunctions(op1, op2, op3)\n  }\n  \n  // three:\n  renderer\n  scene\n  camera\n  clock\n  renderCallBack\n\n  constructor (container, op1, op2, op3) {\n\n    this.container = container\n    this.op1 = op1\n    this.op2 = op2\n    this.op3 = op3\n\n    this.clock = new Clock()\n\n    this.renderer = new Renderer()\n    this.container.appendChild(this.renderer.domElement)\n    \n    this.camera = new PerspectiveCamera(\n      /* fov */    120,\n      /* aspect */ window.innerWidth / window.innerHeight,\n      /* near */   0.001,\n      /* far */    50000\n    )\n    this.camera.position.set(0, 0, 100)\n\n    this.scene = new Scene()\n    this.scene.position.y = -20\n    \n    this.createLights()\n\n    // const light = new AmbientLight(0xffffff, 0.7)\n    // this.scene.add(light)\n    // const directionalLight = new DirectionalLight(0x00ff00, 1.75)\n    // this.scene.add(directionalLight)\n    // directionalLight.position.x = this.scene\n    // directionalLight.target = this.scene\n    // // this.camera.position.x = 0\n    // // this.camera.position.y = 2\n    // // this.camera.position.z = 20\n    // // this.camera.lookAt(\n    // //   this.scene.position.x,\n    // //   this.scene.position.y ,\n    // //   this.scene.position.z\n    // // )\n\n\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement)\n    this.controls.enableDamping = true // an animation loop is required when either damping or auto-rotation are enabled\n    this.controls.dampingFactor = 0.05\n    this.controls.screenSpacePanning = false\n    this.controls.minDistance = 5\n    this.controls.maxDistance = 5000\n    this.controls.maxPolarAngle = Math.PI / 2\n\n// const mesh = new Mesh(\n//   new BoxGeometry(10,10,10),\n//   new MeshBasicMaterial({color: 0x00ffff})\n// )\n// this.scene.add(mesh)\n    \n    const textureSize = 12\n    this.particles = new ParticleSystem(textureSize)\n    this.scene.add(this.particles)\n   \n    \n//     const axesHelper = new AxesHelper(50)\n//     this.scene.add(axesHelper)\n//     //reset axes colors\n// var colors = axesHelper.geometry.attributes.color\n// colors.setXYZ( 0, 0, 0, 0 ); // index, R, G, B\n// colors.setXYZ( 1, 0, 0, 0 ); // red\n// colors.setXYZ( 2, 0, 0, 0 );\n// colors.setXYZ( 3, 0, 0, 0 ); // green\n// colors.setXYZ( 4, 0, 0, 0 );\n// colors.setXYZ( 5, 0, 0, 0 ); // blue\n\n\n    this.addListeners()\n    this.handleWindowResize()\n    this.loop()\n  }\n\n  createLights () {\n    const light = new AmbientLight(0xffffff, 0.7)\n    this.scene.add(light)\n   \n// const light1 = new PointLight(0xff0000, 10, 200)\n// light1.position.set(100, 0, 0)\n// this.scene.add(light1)\n\n// const light2 = new PointLight(0x00ff00, 10, 200)\n// light2.position.set(0, 100, 0)\n// this.scene.add(light2)\n\n// const light3 = new PointLight(0x0000ff, 10, 200)\n// light3.position.set(0, 0, -100)\n// this.scene.add(light3)\n\n    // // A directional light shines from a specific direction. \n    // // It acts like the sun, that means that all the rays produced are parallel. \n    // this.shadowLight = new DirectionalLight(0x00ff00, 10)\n    // this.shadowLight.position.set(0, 0, 10)\n    // this.shadowLight.lookAt(0,0,0)\n  \n    // // Allow shadow casting \n    // this.shadowLight.castShadow = true\n  \n    // // define the visible area of the projected shadow\n    // this.shadowLight.shadow.camera.left = -200\n    // this.shadowLight.shadow.camera.right = 200\n    // this.shadowLight.shadow.camera.top = 200\n    // this.shadowLight.shadow.camera.bottom = -200\n\n    // this.shadowLight.shadow.camera.near = 1\n    // this.shadowLight.shadow.camera.far = 300\n\n    // this.shadowLight.shadow.mapSize.width = 512\n    // this.shadowLight.shadow.mapSize.height = 512\n\n    // this.scene.add(this.shadowLight)\n  }\n\n  loop = () => {\n    this.renderCallBack = requestAnimationFrame(this.loop)\n    this.render()\n    this.controls.update()\n  }\n    \n  render () {\n    // console.log(this.video.currentTime)\n    // this.camera.position.set(0, 0, 100)\n    // const delta = this.clock.getDelta() * 1\n    const elapsedTime = this.clock.getElapsedTime()\n    // this.particles.loop(elapsedTime)\n    this.particles.loop(elapsedTime)\n    // this.particles.material.uniforms.gpgpuOffsets.value = this.gpgpu.simulate(delta, elapsedTime)\n    this.renderer.clear()\n    this.renderer.render(this.scene, this.camera)\n  }\n  \n  updateFunctions (op1, op2, op3) {\n    this.particles.updateFunctions(op1, op2, op3)\n  }\n\n  handleWindowResize = () => {\n    this.stageWidth = window.innerWidth\n    this.stageHeight = window.innerHeight\n    this.renderer.setSize(this.stageWidth, this.stageHeight)\n    this.camera.aspect = this.stageWidth / this.stageHeight\n    this.camera.updateProjectionMatrix()\n  }\n\n  destroy () {\n    window.cancelAnimationFrame(this.renderCallBack)\n    this.simulation.destroy()\n    this.removeListeners()\n  }\n\n  addListeners () {\n    window.addEventListener('resize', this.handleWindowResize, false)\n  }\n\n  removeListeners () {\n    window.removeEventListener('resize', this.handleWindowResize)\n  }\n\n}\n  ","<template>\n  <div id=\"app\">\n\n    <div class=\"canvas-container\" ref=\"canvas-container\"></div>\n\n    <header>\n      <span class=\"prefix\">f(x,y,z) = </span>\n      <span class=\"inputs-wrapper\">\n        <input \n          v-model=\"input1\" \n          :class=\"{'invalid':input1Func === null}\"\n          type=\"text\" />\n        <input \n          v-model=\"input2\" \n          :class=\"{'invalid':input2Func === null}\"\n          type=\"text\" />\n        <input \n          v-model=\"input3\" \n          :class=\"{'invalid':input3Func === null}\"\n          type=\"text\" />\n      </span>\n      <!-- <button\n        @click=\"evaluate\"\n        :class=\"{'invalid':input1Func === null || input2Func === null}\">\n        Evaluate\n      </button>  -->\n</header>\n    \n  </div>\n</template>\n\n<script>\nimport Stage from './engine/Stage'\n\nimport { evaluate } from 'mathjs'\n\nconst noop = () => 0\n\nexport default {\n  name: 'App',\n  data: () => ({\n    // input1: '0',\n    // input2: '0',\n    // input3: '0',\n    // input1: 'x',\n    // input2: 'y',\n    // input3: 'z',\n    input1: 'y*z',\n    input2: 'x*z',\n    input3: 'x*y',\n    input1Func: noop,\n    input2Func: noop,\n    input3Func: noop,\n  }),\n  mounted () {\n      Stage.initialize(this.$refs['canvas-container'])\n      this.input1Func = evaluate(`f(x, y, z) = ${this.input1}`)\n      this.input2Func = evaluate(`f(x, y, z) = ${this.input2}`)\n      this.input3Func = evaluate(`f(x, y, z) = ${this.input3}`)\n      Stage.updateFunctions(this.input1Func, this.input2Func, this.input3Func)\n  },\n  beforeDestroy () {\n    Stage.destroy()\n  },\n  watch: {\n    input1 () {\n      const text = this.input1.trim().toLowerCase()\n      if (text === '') {\n        this.input1Func = noop\n      } else {\n        const input = `f(x, y, z) = ${text}`\n        try {\n          this.input1Func = evaluate(input)\n          this.sendToTracer()\n        } catch (error) {\n          this.input1Func = null\n        }\n      }\n    },\n    input2 () {\n      const text = this.input2.trim().toLowerCase()\n      if (text === '') {\n        this.input2Func = noop\n      } else {\n        const input = `f(x, y, z) = ${text}`\n        try {\n          this.input2Func = evaluate(input)\n          this.sendToTracer()\n        } catch (error) {\n          this.input2Func = null\n        }\n      }\n    },\n    input3 () {\n      const text = this.input3.trim().toLowerCase()\n      if (text === '') {\n        this.input3Func = noop\n      } else {\n        const input = `f(x, y, z) = ${text}`\n        try {\n          this.input3Func = evaluate(input)\n          this.sendToTracer()\n        } catch (error) {\n          this.input3Func = null\n        }\n      }\n    }\n  },\n  methods: {\n    sendToTracer () {\n      if (this.input1Func && this.input2Func && this.input3Func) {\n        Stage.updateFunctions(this.input1Func, this.input2Func, this.input3Func)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\nbody {\n  background: white;\n  margin: 0;\n  overflow: hidden;\n  font-size: 19px;\n  .canvas-container {\n    width: 100vw;\n    height: 100vh;\n    position: relative;\n    canvas {\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n    }\n  }\n  header {\n    position: fixed;\n    top: 0.5rem;\n    left: 0.5rem;\n    right: 0.5rem;\n    z-index: +1;\n    background: rgba(white, 0.8);\n    font-family: Bradley Hand, Brush Script MT, Chalkduster, Comic Sans MS;\n    font-weight: 100;\n    font-size: 2rem;\n    color: black;\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: center;\n    justify-content: center;\n    .prefix {\n    }\n    .inputs-wrapper {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      margin: 0 1rem;\n      padding: 0rem 2rem;\n      position: relative;\n      &:before,\n      &:after {\n        content: \" \";\n        position: absolute;\n        display: block;\n        top: 0;\n        bottom: 0;\n        border: 2px solid black;\n        width: 1rem;\n        border-radius: 4px;\n      }\n      &:before {\n        right: auto;\n        left: 0;\n        border-right: 4px solid transparent;\n      }\n      &:after {\n        right: 0;\n        left: auto;\n        border-left: 4px solid transparent;\n      }\n\n      input {\n        background: transparent;\n        outline: none;\n        color: black;\n        border: none;\n        border: 2px solid transparent;\n        border-bottom-color: #4c73b4;\n        font-size: 1.6rem;\n        width: 100%;\n        max-width: 160px;\n        text-align: center;\n        margin: 0.5rem 0;\n        transition: all ease-out 1000ms;\n        border-radius: 2px;\n        font-family: Comic Sans MS;\n        font-weight: 100;\n        &.invalid,\n        &.invalid:focus {\n          background: rgba(#ff7364, 0.3);\n          border-bottom-color: lighten(#ff7364, 10%);\n        }\n        &:focus {\n          transition: all ease-in 120ms;\n          outline: none;\n          background: rgba(#4c73b4, 0.3);\n          border-bottom-color: lighten(#4c73b4, 10%);\n        }\n      }\n    }\n    \n    button {\n      border: 2px solid #4c73b4;\n      border-radius: 5px;\n      color: black;\n      background: white;\n      font-weight: 600;\n      font-size: 1.4rem;\n      line-height: 2rem;\n      padding: 0.25rem 1rem;\n      font-family: Comic Sans MS;\n      font-weight: 100;\n      transition: all ease-out 500ms;\n      cursor: pointer;\n      &:hover {\n        transition: all ease-in 120ms;\n        color: white;\n        border: 2px solid darken(#4c73b4, 10%);\n        background: rgba(#4c73b4, 0.9);\n      }\n      &.invalid,\n      &.invalid:focus {\n        background: rgba(#ff7364, 0.3);\n        border-color: lighten(#ff7364, 10%);\n        color: lighten(#ff7364, 10%);\n        opacity: 0.8;\n      }\n      &:focus {\n        outline: none;\n        border: 2px solid darken(#4c73b4, 10%);\n        background: rgba(#4c73b4, 0.2);\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=a5c8a60c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}